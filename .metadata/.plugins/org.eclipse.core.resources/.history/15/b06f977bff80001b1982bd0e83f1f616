package com.webtoon.spring.controller;



import java.util.HashMap;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.webtoon.spring.service.JoinService;
import com.webtoon.spring.service.impl.ToonServiceImpl;


@Controller
@RequestMapping("/")
public class ToonController {
	

	@Autowired
	private ToonServiceImpl toonServiceImpl;
	
	
	
	@RequestMapping(value="goWebToonPage" ,method=RequestMethod.GET)
	public String goWebToonPage(HttpServletRequest request,Model model) {
		
//		System.out.println("_+_+_"+request.getParameter("toon"));
		
		String toon_name=request.getParameter("toon");
		
//		System.out.println("out : "+ toonServiceImpl.getToonVO(toon_name));
		
		model.addAttribute("toonVO", toonServiceImpl.getToonVO(toon_name));
		
		
//		System.out.println("--->"+toonServiceImpl.getToonListVO(toon_name));
		model.addAttribute("toonListVO",toonServiceImpl.getToonListVO(toon_name));
		
		
		model.addAttribute("chk","goWebToonView");

		
		
		//값은 get방식으로 올바르게 넘어옴  이값을가지고 service 처리 필요 db조회 ㅇㅇ
		
		
		return "toon/toon_list_view";
	}
	
	@RequestMapping(value="goWebToonPageView" ,method=RequestMethod.GET)
	public String goWebToonPageView(HttpServletRequest request,Model model) {
		
		String toon_name=request.getParameter("name");
		String toon_ep_num=request.getParameter("ep");

		
		model.addAttribute("view",toonServiceImpl.getToonView(toon_name,toon_ep_num));
		
		model.addAttribute("chk","goWebToonPageView");

		return "toon/toon_page_view";
	}
	
	
	
	
	
}
