<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>


<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test</title>



<!-- 부트스트랩 css 사용 -->
<link rel="stylesheet" href="/resources/css/bootstrap.css">

<!--  부트스트랩 js 사용 -->
<script type="text/javascript" src="/resources/js/bootstrap.js"></script>

<!--  부트스트랩 js 사용 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/resources/js/bootstrap.js"></script>

	
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<style>
@import
	url('https://fonts.googleapis.com/css2?family=Secular+One&display=swap')
	;

@import
	url('https://fonts.googleapis.com/css2?family=Gothic+A1:wght@600&family=Sunflower:wght@300&display=swap')
	;

@font-face {
	src: url("resources/font/AppleSDGothicNeoM.ttf");
	font-family: "applefont"
}

html, body {
	margin: 0;
	padding: 0;
}

#navbarsExample04 {
	margin-left: 60%;
}

.nav-item {
	font-family: "applefont";
	font-size: 20px;
	transition: opacity ease 0.5s 0s;
}

.nav-item:hover {
	opacity: 0.4;
}

.obookYoutube {
	
}

.container-fluid {
	width: 70%;
	margin-left: auto;
	margin-right: auto;
}

.myImg {
	width: 200px;
	height: 200px;
}

.home_top {
	margin-top: 30px;
	width: 100%;
	height: 300px;
	display: flex;
	justify-content: center;
	width: 100%;
}

#carouselExampleIndicators {
	width: 70%;
}

.carousel-inner {
	box-shadow: 5px 5px 25px grey;
	width: 95%;
	height: 300px;
	border-radius: 15px;
}

.carousel-item{

	height: 300px;
}


.d-block {
	border-radius: 15px;
	height:100%;
}

.navbar-brand {
	font-size: 40px;
	font-family: 'Secular One', sans-serif;
	transition: opacity ease 0.5s 0s;
}

.navbar-brand:hover {
	opacity: 0.4;
}

.webtoon-div {
	margin-top: 40px;
	width: 100%;
	display: flex;
	flex-direction: column;
	align-items: center;
}

.day-div {
	display: flex;
	justify-content: center;
	padding-top: 5px;
	padding-bottom: 5px;
	font-weight: bold;
}

.dayBtn {
	width: 80px;
	margin-left: 25px;
	margin-right: 25px;
	border-radius: 30px;
	border-color: #6C757D
}

.webtoonlist-div {
	padding-left: 120px;
	width: 80%;
	margin-top: 40px;
}

.webtoonlist-box {
	display: inline-flex;
	width: 400px;
	height: 150px;
}

.webtoonlist-boximg {
	width: 150px;
	height: 150px;
	border-radius: 15px;
}

.box-right {
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
	margin-left: 30px;
}

.box-right div:nth-child(1) {
	font-family: 'Sunflower', sans-serif;
	font-weight: 600;
	font-size: 20px;
}

.box-right div:nth-child(2) {
	font-family: applefont;
	font-weight: 400;
	font-size: 15px;
}
</style>



</head>
<body>
	<!--
	WEB-INF안의 폴더에는 직접 밖에서 접근이 불가능
그래서 이미지는 위의 폴더에서 보시면 resources라는 폴더안에 넣어둔다.
 
 https://itjy2.tistory.com/109 이미지 출력관련  -->

	<nav class="navbar navbar-expand-md navbar-dark bg-dark"
		aria-label="Fourth navbar example">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">OBook</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarsExample04"
				aria-controls="navbarsExample04" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" data-interval="false" id="navbarsExample04">
				<ul class="navbar-nav me-auto mb-2 mb-md-0">
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="#">로그인</a></li>
					<li class="nav-item"><a class="nav-link active"
						aria-current="page" href="#">회원가입</a></li>
					<li class="nav-item"><a class="nav-link active obookYoutube"
						aria-current="page" href="#">Obook Youtube</a></li>

					<!--   <li class="nav-item">
            <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
          </li> -->

				</ul>
			</div>
			

		</div>
		
	</nav>

	
		<div class="home_top ">
	<div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
  <ol class="carousel-indicators">
    <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></li>
    <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></li>
    <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="resources/public_img/main_wide_img_1.JPG" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="resources/public_img/main_wide_img_2.JPG" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="resources/public_img/main_wide_img_3.JPG" class="d-block w-100" alt="...">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </a>
</div>
</div>

	<div class="webtoon-div">

		<div class="day-div">
			<button type="button" value="일"
				class="btn btn-outline-secondary dayBtn">일</button>
			<button type="button" value="월"
				class="btn btn-outline-secondary dayBtn">월</button>
			<button type="button" value="화"
				class="btn btn-outline-secondary dayBtn">화</button>
			<button type="button" value="수"
				class="btn btn-outline-secondary dayBtn">수</button>
			<button type="button" value="목"
				class="btn btn-outline-secondary dayBtn">목</button>
			<button type="button" value="금"
				class="btn btn-outline-secondary dayBtn">금</button>
			<button type="button" value="토"
				class="btn btn-outline-secondary dayBtn">토</button>
		</div>
		<div class="webtoonlist-div">

			<div class="webtoonlist-div">
				<c:forEach items="${day_list }" var="list">

					<div class='webtoonlist-box' style="display: inline-flex;width: 400px;height: 150px;">
						<div class='box-left'>
							<img src='/filepath/${list.toon_thum }' style="width: 150px;	height: 150px;	border-radius: 15px;"
								class='webtoonlist-boximg'>
							<div class='box-right' style="	display: flex;	justify-content: center;align-items: center;flex-direction: column;	margin-left: 30px;">
								<div>${list.toon_name }</div>
								<div>${list.toon_author }</div>
							</div>
						</div>
					</div>
				</c:forEach>

			</div>
		</div>

	</div>





	<%-- <c:forEach items="${viewAll }" var="list">
	<p>번호: ${list.toon_idx }</p>
	<p>장르 : ${list.toon_genre }</p>
	<p>작품이름 : ${list.toon_name }</p>
	<p>작가 : ${list.toon_author }</p>
	<img src="/filepath/${list.toon_thum }" alt="이미지" class="myImg"/>
	<p>요일 : ${list.toon_dayOfWeek }</p>
	
	<hr>
</c:forEach> --%>


	<script>


	
	
		/* 클라이언트쪽에서 데이터 형태를 JSON으로 보내주면, 서버쪽에서도 JSON으로 받아줘야한다.

		 JSON형태로 받게해주는 Annotation이 @RequestBody이다. */
		 

		$('.dayBtn').on('click', function() {
			var form = {
				day : $(this).val()
			}

			$.ajax({
				url : "searchByDay",
				type : "POST",
				data : form,
				datatype : 'json',
				success : function(data) {
					$('.webtoonlist-div').empty();
					
					console.log(data);
					var len = Object.keys(data).length;
					
					for(var i = 0 ; i <len;i++){
						console.log(data[i].toon_thum);
						$('.webtoonlist-div').append("<div class='webtoonlist-box'><div class='box-left'><img src='/filepath/"+data[i].toon_thum +"' class='webtoonlist-boximg'></div>"+
								"<div class='box-right'><div>"+data[i].toon_name+"</div><div>"+data[i].toon_author+" / "+data[i].toon_genre+"</div></div>"+"</div>"); 
																
								
					
						
					}
					
			
					
					
				},
				error : function() {
					alert("simpleWithObject err");
				}
			});
		});
	</script>


</body>
</html>