<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>

<%@ include file="../header/header.jsp"%>
<%@ include file="../header/nav.jsp"%>

<link rel="stylesheet" href="/resources/mycss/home.css">
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

</head>
<body>
	<!--
	WEB-INF안의 폴더에는 직접 밖에서 접근이 불가능
그래서 이미지는 위의 폴더에서 보시면 resources라는 폴더안에 넣어둔다.
 
 https://itjy2.tistory.com/109 이미지 출력관련  
 
 https://thinkerodeng.tistory.com/198
 -->



	<div class="home_top ">
		<div id="carouselExampleIndicators" class="carousel slide"
			data-bs-ride="carousel">
			<ol class="carousel-indicators">
				<li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
					class="active"></li>
				<li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></li>
				<li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></li>
			</ol>
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img src="resources/public_img/main_wide_img_1.JPG"
						class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img src="resources/public_img/main_wide_img_2.JPG"
						class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img src="resources/public_img/main_wide_img_3.JPG"
						class="d-block w-100" alt="...">
				</div>
			</div>
			<a class="carousel-control-prev" href="#carouselExampleIndicators"
				role="button" data-bs-slide="prev"> <span
				class="carousel-control-prev-icon" aria-hidden="true"></span> <span
				class="visually-hidden">Previous</span>
			</a> <a class="carousel-control-next" href="#carouselExampleIndicators"
				role="button" data-bs-slide="next"> <span
				class="carousel-control-next-icon" aria-hidden="true"></span> <span
				class="visually-hidden">Next</span>
			</a>
		</div>
	</div>

	<div class="webtoon-div">

		<div class="day-div">
			<button type="button" value="일"
				class="btn btn-outline-secondary dayBtn">일</button>
			<button type="button" value="월"
				class="btn btn-outline-secondary dayBtn">월</button>
			<button type="button" value="화"
				class="btn btn-outline-secondary dayBtn">화</button>
			<button type="button" value="수"
				class="btn btn-outline-secondary dayBtn">수</button>
			<button type="button" value="목"
				class="btn btn-outline-secondary dayBtn">목</button>
			<button type="button" value="금"
				class="btn btn-outline-secondary dayBtn">금</button>
			<button type="button" value="토"
				class="btn btn-outline-secondary dayBtn">토</button>
		</div>
		<div class="webtoonlist-div"
			style="padding-left: 120px; width: 80%; margin-top: 40px;">
			<c:forEach items="${day_list }" var="list">


				<div class='webtoonlist-box' onclick="location.href='goWebToonPage?toon=${list.toon_name}'"
					style="cursor: pointer;margin-bottom: 30px; display: inline-flex; width: 400px; height: 150px;">
					<div class='box-left'>
						<img src='/home_thum_path/${list.toon_thum }'
							style="width: 150px; height: 150px; border-radius: 15px;"
							class='webtoonlist-boximg'>
					</div>
					<div class='box-right'
						style="display: flex; justify-content: center; align-items: center; flex-direction: column; margin-left: 30px;">
						<div
							style="font-family: 'Sunflower', sans-serif; font-weight: 600; font-size: 20px;">${list.toon_name }</div>
						<div
							style=" font-weight: 400; font-size: 15px;">${list.toon_author } / ${list.toon_genre }</div>
					</div>

				</div>
			</c:forEach>
		</div>

	</div>


	<%@ include file="../footer/footer.jsp"%>




	<%-- <c:forEach items="${viewAll }" var="list">
	<p>번호: ${list.toon_idx }</p>
	<p>장르 : ${list.toon_genre }</p>
	<p>작품이름 : ${list.toon_name }</p>
	<p>작가 : ${list.toon_author }</p>
	<img src="/filepath/${list.toon_thum }" alt="이미지" class="myImg"/>
	<p>요일 : ${list.toon_dayOfWeek }</p>
	
	<hr>
</c:forEach> --%>


	<script>

	
	
		/* 클라이언트쪽에서 데이터 형태를 JSON으로 보내주면, 서버쪽에서도 JSON으로 받아줘야한다.

		 JSON형태로 받게해주는 Annotation이 @RequestBody이다. */

		$('.dayBtn')
				.on(
						'click',
						function() {
							var form = {
								day : $(this).val()
							}

							$
									.ajax({
										url : "searchByDay",
										type : "POST",
										data : form,
										datatype : 'json',
										success : function(data) {
											$('.webtoonlist-div').empty();

											console.log(data);
											var len = Object.keys(data).length;

											for (var i = 0; i < len; i++) {
												console.log(data[i].toon_thum);
												$('.webtoonlist-div')
														.append(
																"<div class='webtoonlist-box' onclick=\"location.href=\'goWebToonPage?toon="+data[i].toon_name+"\'\"><div class='box-left'><img src='/home_thum_path/"+data[i].toon_thum +"' class='webtoonlist-boximg'></div>"
																		+ "<div class='box-right'><div>"
																		+ data[i].toon_name
																		+ "</div><div>"
																		+ data[i].toon_author
																		+ " / "
																		+ data[i].toon_genre
																		+ "</div></div>"
																		+ "</div>");

											}

										},
										error : function() {
											alert("simpleWithObject err");
										}
									});
						});
	</script>


</body>
</html>